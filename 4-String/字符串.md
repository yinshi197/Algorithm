# å­—ç¬¦ä¸²

### åŸºæœ¬æ¦‚å¿µ

- å­—ç¬¦ä¸²ä¹Ÿæ˜¯ä¸€ç§æ•°ç»„ï¼Œæ‰€ä»¥å…ƒç´ åœ¨å†…å­˜ä¸­æ˜¯**è¿ç»­åˆ†å¸ƒ**

- stringç›¸å…³å¸¸ç”¨å‡½æ•°
  - resize()
  - reverse()  ç¿»è½¬
  - find()   æŸ¥æ‰¾å­ä¸²
  - spit()   åˆ†å‰²

### ç›¸å…³ç®—æ³•

- ç¿»è½¬å­—ç¬¦ä¸²
- ç¿»è½¬å­—ç¬¦ä¸²2
- æ›¿æ¢æ•°å­—
- ç¿»è½¬å­—ç¬¦ä¸²é‡Œçš„å•è¯
- å³æ—‹è½¬å­—ç¬¦ä¸²
- å®ç°strStr()
- é‡å¤çš„å­—å­—ç¬¦ä¸²

#### ç¿»è½¬å­—ç¬¦ä¸²

- å­—ç¬¦ä¸²ä¹Ÿæ˜¯ä¸€ç§æ•°ç»„ï¼Œæ‰€ä»¥å…ƒç´ åœ¨å†…å­˜ä¸­æ˜¯**è¿ç»­åˆ†å¸ƒ**
- å¯ä»¥ä½¿ç”¨**algorithmåº“**é‡Œé¢çš„**reverse**å‡½æ•°å®ç°
- è‡ªå·±å®ç°æ€è·¯ï¼šåŒæŒ‡é’ˆï¼Œä»ä¸¤è¾¹å¾€ä¸­é—´é ã€‚äº¤æ¢å¤´æŒ‡é’ˆä¸å°¾æŒ‡é’ˆ

```c++
#include <iostream>
#include <vector>
#include <algorithm>    //resever
#include <string>

using namespace std;

class Solution {
public:
    void reverseString(vector<char>& s) {
        for(int i = 0, j = s.size() - 1; i < j; i++, j--)
        {
            swap(s[i], s[j]);
        }
    }
};

int main(int argc, char **argv)
{
    string s = "hello world";
    reverse(s.begin(), s.end());   //algorithmåº“é‡Œé¢
    cout << s << endl;
    vector<char> vec{'h','e','l', 'l', 'o'};
    Solution *so = new Solution();
    so->reverseString(vec);
    for( auto i : vec)
    {
        cout << i << " ";
    }
    cout << endl;
    return 0;
}
```

#### ç¿»è½¬å­—ç¬¦ä¸²2

- reverse()å‡½æ•°çš„ä½¿ç”¨
- ç»Ÿä¸€å¾ªç¯è¾¹ç•Œ

```c++
#include <iostream>
#include <vector>
#include <algorithm>    //resever
#include <string>

using namespace std;

class Solution {
public:
    string reverseStr(string s, int k) {
        for(int i = 0; i < s.size(); i += (2 * k))
        {
            if(i + k <= s.size())
            {
                reverse(s.begin() + i, s.begin() + i + k);
            }
            else
            {   //å‰©ä¸‹æƒ…å†µéœ€è¦ç¿»è½¬çš„å­—ç¬¦ä¸²å°‘äºkï¼Œç›´æ¥ç¿»è½¬å‰©ä¸‹çš„å­—ç¬¦ä¸²
                //å‰©ä¸‹çš„æƒ…å†µéƒ½éœ€è¦æ‰§è¡Œä¸‹é¢çš„è¯­å¥ï¼Œè€Œä¸”for()ä¼šè‡ªåŠ¨i += (2 * k)ï¼Œé€€å‡º
                reverse(s.begin() + i, s.end());
            }
        }
        return s;
    }
};

int main(int argc, char **argv)
{
    string s = "abcdefg";
    Solution *so = new Solution();
    s = so->reverseStr(s, 2);
    cout << s << endl;
    return 0;
}
```

#### æ›¿æ¢æ•°å­—

- resize()å‡½æ•°çš„ä½¿ç”¨ï¼Œå¯ä»¥æ‰©å……å­—ç¬¦ä¸²é•¿åº¦
- åŒæŒ‡é’ˆä»åé¢å‘å‰éå†ï¼Œå› ä¸ºå·²ç»çŸ¥é“å­—ç¬¦ä¸²çš„é•¿åº¦äº†ã€‚ä¸éœ€è¦é¢å¤–çš„è¾…åŠ©ç©ºé—´å»è¿›è¡Œå­˜å‚¨ç§»åŠ¨å…ƒç´ ã€‚
- å­—ç¬¦ä¸²å’Œæ•°ç»„çš„åŒºåˆ«ï¼Œchar a[5] = "asd"; a[3] = '\0'ï¼Œæ˜¯ç»“æŸç¬¦ã€‚

```c++
#include <iostream>
#include <vector>
#include <algorithm>    //resever
#include <string>

using namespace std;

class Solution {
public:
    string reverseStr(string s) {
        int sOldIndex = s.size() - 1;   //æœªæ‰©å……å‰çš„ä¸‹æ ‡
        int count = 0;
        for(auto i : s)
        {
            if(i >= '0' && i <= '9')
                count++;
        }

        //å…³é”®ç‚¹ï¼šresizeçš„ä½¿ç”¨
        s.resize(s.size() + count * 5);
        int newIndex = s.size() - 1;
        while(sOldIndex >= 0)   //0ä¸èƒ½æ¼æ‰
        {
            if(s[sOldIndex] >= '0' && s[sOldIndex] <= '9')
            {
                //number
                s[newIndex--] = 'r';
                s[newIndex--] = 'e';
                s[newIndex--] = 'b';
                s[newIndex--] = 'm';
                s[newIndex--] = 'u';
                s[newIndex--] = 'n';
            }else
            {
                s[newIndex--] = s[sOldIndex];
            }
            sOldIndex--;
        }

        return s;
    }
};

int main(int argc, char **argv)
{
    string s;
    cin >> s;
    Solution *so = new Solution();
    s = so->reverseStr(s);
    cout << s << endl;
    return 0;
}
```

#### ç¿»è½¬å­—ç¬¦ä¸²é‡Œé¢çš„å•è¯

- **å»é™¤å¤šä½™ç©ºæ ¼ã€ç¿»è½¬æ•´ä¸ªå­—ç¬¦ä¸²ã€ç¿»è½¬å•è¯**
- **å»é™¤å¤šä½™ç©ºæ ¼**ï¼šé™¤äº†ç¬¬ä¸€ä¸ªå•è¯ã€æ¯ä¸ªæ–°å•è¯å‰é¢æ‰‹åŠ¨æ·»åŠ ä¸€ä¸ªç©ºæ ¼
- å¯ä»¥ä½¿ç”¨spitåˆ†å‰²å•è¯(æ—¶é—´å¤æ‚åº¦ä¼šé«˜å¾ˆå¤š)

```c++
#include <iostream>
#include <vector>
#include <algorithm>    //resever
#include <string>

using namespace std;

class Solution {
public:
    string reverseWords(string s) {
        //1.æ¸…æ¥šç©ºæ ¼
        clearSpace(s);
        //2.å­—ç¬¦ä¸²ç¿»è½¬
        reverseString(s, 0, s.size() - 1);
        //3.ç¿»è½¬å­—ç¬¦ä¸²
        int start = 0;
        for(int i = 0; i <= s.size(); i++)
        {
            if(s[i] == ' ' || i == s.size())
            {
                reverseString(s, start, i - 1);
                start = i + 1;
            }
        }

        return s;
    }

    //å·¦é—­å³é—­
    void reverseString(string &s, int start, int end) {
        for(int i = start, j = end; i < j; i++, j--)
        {
            swap(s[i], s[j]);
        }
    }

    void clearSpace(string &s)
    {
        int slow = 0;
        for(int i = 0; i < s.size(); i++)
        {
            if(s[i] != ' ')
            {
                if(slow != 0)   s[slow++] = ' ';    //åœ¨å•è¯å‰é¢æ‰‹åŠ¨æ·»åŠ ç©ºæ ¼ï¼Œé™¤äº†ç¬¬ä¸€ä¸ªå•è¯
                while(i < s.size() && s[i] != ' ')
                {
                    s[slow++] = s[i++];
                }
            }
        }

        s.resize(slow);
    }
};

int main(int argc, char **argv)
{
    string s = "the sky is blue";
    Solution *so = new Solution();
    s = so->reverseWords(s);
    cout << s << endl;

    return 0;
}
```

#### å³æ—‹è½¬å­—ç¬¦ä¸²

- **ä¸èƒ½ç”³è¯·é¢å¤–ç©ºé—´ï¼Œåªèƒ½åœ¨æœ¬ä¸²ä¸Šæ“ä½œ**
- å®ç°çš„æ€è·¯æ˜¯æ•´ä½“ç¿»è½¬åŠ ä¸¤æ¬¡åˆ†æ®µç¿»è½¬

```c++
#include <iostream>
#include <vector>
#include <algorithm>    //resever
#include <string>

using namespace std;

class Solution {
public:
    string rightReverseStr(string s, int k) {
        reverseString(s, 0, s.size() - 1);
        reverseString(s, 0, k - 1);
        reverseString(s, k, s.size() - 1);
        
        return s;
    }

    //å·¦é—­å³é—­
    void reverseString(string &s, int start, int end) {
        for(int i = start, j = end; i < j; i++, j--)
        {
            swap(s[i], s[j]);
        }
    }
};

int main(int argc, char **argv)
{
    int k;
    string s;
    cin >> k >> s; 
    Solution *so = new Solution();
    s = so->rightReverseStr(s, k);
    cout << s << endl;

    return 0;
}
```

#### å®ç° strStr()-(KMP ç»å…¸é¢˜ç›®)

- KMPçš„ç»å…¸æ€æƒ³å°±æ˜¯ï¼š**å½“å‡ºç°å­—ç¬¦ä¸²ä¸åŒ¹é…æ—¶ï¼Œå¯ä»¥è®°å½•ä¸€éƒ¨åˆ†ä¹‹å‰å·²ç»åŒ¹é…çš„æ–‡æœ¬å†…å®¹ï¼Œåˆ©ç”¨è¿™äº›ä¿¡æ¯é¿å…ä»å¤´å†å»åšåŒ¹é…ã€‚**
- **nextæ•°ç»„(å‰ç¼€è¡¨)**ï¼šè®°å½•å·²ç»åŒ¹é…çš„æ–‡æœ¬å†…å®¹ï¼Œæ˜¯KMPçš„é‡ç‚¹ï¼Œä¹Ÿæ˜¯nextæ•°ç»„è‚©è´Ÿçš„é‡ä»»ï¼Œ**nextæ•°ç»„æ—¢å¯ä»¥å°±æ˜¯å‰ç¼€è¡¨ï¼Œä¹Ÿå¯ä»¥æ˜¯å‰ç¼€è¡¨ç»Ÿä¸€å‡ä¸€**
- **å‰ç¼€è¡¨**ï¼š**å‰ç¼€è¡¨æ˜¯ç”¨æ¥å›é€€çš„ï¼Œå®ƒè®°å½•äº†æ¨¡å¼ä¸²ä¸ä¸»ä¸²(æ–‡æœ¬ä¸²)ä¸åŒ¹é…çš„æ—¶å€™ï¼Œæ¨¡å¼ä¸²åº”è¯¥ä»å“ªé‡Œå¼€å§‹é‡æ–°åŒ¹é…ã€‚**
- **æœ€é•¿å…¬å…±å‰åç¼€**ï¼š**å‰ç¼€æ˜¯æŒ‡ä¸åŒ…å«æœ€åä¸€ä¸ªå­—ç¬¦çš„æ‰€æœ‰ä»¥ç¬¬ä¸€ä¸ªå­—ç¬¦å¼€å¤´çš„è¿ç»­å­ä¸²**ã€‚**åç¼€æ˜¯æŒ‡ä¸åŒ…å«ç¬¬ä¸€ä¸ªå­—ç¬¦çš„æ‰€æœ‰ä»¥æœ€åä¸€ä¸ªå­—ç¬¦ç»“å°¾çš„è¿ç»­å­ä¸²**ã€‚
  - **å‰ç¼€è¡¨è¦æ±‚çš„å°±æ˜¯ç›¸åŒå‰åç¼€çš„é•¿åº¦ã€‚**å­—ç¬¦ä¸²açš„æœ€é•¿ç›¸ç­‰å‰åç¼€ä¸º0ã€‚ å­—ç¬¦ä¸²aaçš„æœ€é•¿ç›¸ç­‰å‰åç¼€ä¸º1ã€‚ å­—ç¬¦ä¸²aaaçš„æœ€é•¿ç›¸ç­‰å‰åç¼€ä¸º2


##### å¦‚ä½•è®¡ç®—å‰ç¼€è¡¨

![è®¡ç®—å‰ç¼€è¡¨](./assets/è®¡ç®—å‰ç¼€è¡¨.png)

ä¾‹å­ï¼š"aabaa" å‰ç¼€ï¼š"a"ã€"aa"ã€"aab"ã€"aaba"ï¼›åç¼€ï¼š"a"ã€"aa"ã€"baa"ã€"abaa",æœ€é•¿å…¬å…±å‰åç¼€"aa",é•¿åº¦ä¸º2

##### æ„é€ nextæ•°ç»„

**nextæ•°ç»„æ—¢å¯ä»¥å°±æ˜¯å‰ç¼€è¡¨ï¼Œä¹Ÿå¯ä»¥æ˜¯å‰ç¼€è¡¨ç»Ÿä¸€å‡ä¸€ï¼ˆå³ç§»ä¸€ä½ï¼Œåˆå§‹ä½ç½®ä¸º-1ï¼‰**

**æ„é€ nextæ•°ç»„å…¶å®å°±æ˜¯è®¡ç®—æ¨¡å¼ä¸²sï¼Œå‰ç¼€è¡¨çš„è¿‡ç¨‹ã€‚** ä¸»è¦æœ‰å¦‚ä¸‹ä¸‰æ­¥ï¼š

- åˆå§‹åŒ–
- å¤„ç†å‰åç¼€ä¸ç›¸åŒçš„æƒ…å†µ
- å¤„ç†å‰åç¼€ç›¸åŒçš„æƒ…å†µ

```c++
void getNext(int *next, const string& s)
{
    //1.åˆå§‹åŒ–
    int j = -1;     //jæŒ‡å‘å‰ç¼€æœ«å°¾ä½ç½®ï¼ŒiæŒ‡å‘åç¼€æœ«å°¾ä½ç½®ã€‚
    next[0] = j;    //å‰ç¼€è¡¨ç»Ÿä¸€å‡ä¸€çš„è®°å½•æ–¹æ³•


    for(int i = 1; i < s.size(); i++)
    {   
        //2.å¤„ç†å‰åç¼€ä¸åŒçš„å‰å†µ
        while(j >= 0 && s[i] != s[j + 1])
            j = next[j];    //å‘å‰å›é€€

        //3.å¤„ç†å‰åç¼€ç›¸åŒçš„æƒ…å†µ
        if(s[i] == s[j + 1])
        {
            j++;
        }
        next[i] = j;
    }
}
```

------

```c++
#include <iostream>
#include <vector>
#include <algorithm>    //resever
#include <string>

using namespace std;

class Solution {
public:
    void getNext(int *next, const string& s)
    {
        //1.åˆå§‹åŒ–
        int j = -1;     //jæŒ‡å‘å‰ç¼€æœ«å°¾ä½ç½®ï¼ŒiæŒ‡å‘åç¼€æœ«å°¾ä½ç½®ã€‚
        next[0] = j;    //å‰ç¼€è¡¨ç»Ÿä¸€å‡ä¸€çš„è®°å½•æ–¹æ³•

        
        for(int i = 1; i < s.size(); i++)
        {   
            //2.å¤„ç†å‰åç¼€ä¸åŒçš„å‰å†µ
            while(j >= 0 && s[i] != s[j + 1])
                j = next[j];    //å‘å‰å›é€€

            //3.å¤„ç†å‰åç¼€ç›¸åŒçš„æƒ…å†µ
            if(s[i] == s[j + 1])
            {
                j++;
            }
            next[i] = j;
        }
    }

    int strStr(string haystack, string needle) {
        if(needle.size() == 0) return 0;
        vector<int> next(needle.size());
        getNext(&next[0], needle);
        int j = -1;
        for(int i = 0; i < haystack.size(); i++)
        {
            while(j >= 0 && haystack[i] != needle[j + 1])
            {
                j = next[j];
            }

            if(haystack[i] == needle[j + 1])  j++;  //i++åœ¨forå¾ªç¯é‡Œé¢

            if(j == needle.size() - 1)
            {
                return (i - needle.size() + 1);
            }
        }

        return -1;
    }
};

int main(int argc, char **argv)
{
    string s = "babba";
    string t = "bbb";
    Solution *so = new Solution();
    int ret = so->strStr(s, t);
    cout << ret << endl;

    return 0;
}
```

![KMPå­ä¸²åŒ¹é…](./assets/KMPå­ä¸²åŒ¹é….gif)

#### é‡å¤çš„å­å­—ç¬¦ä¸²

##### æ–¹æ³•1

- S+Sé‡Œé¢æœ‰å¤§äº2ä¸ªSï¼Œå»æ‰ç¬¬ä¸€ä¸ªå­—ç¬¦å¼€å§‹æ‰¾Så¦‚æœæ‰¾åˆ°çš„ä½ç½®ä¸æ˜¯åœ¨S.size()å³S+Sçš„ç¬¬äºŒä¸ªSå¼€å§‹çš„ä½ç½®ï¼Œè¿”å›true

```c++
#include <iostream>
#include <vector>
#include <algorithm>    //resever
#include <string>

using namespace std;

class Solution {
public:
    bool repeatedSubstringPattern(string s) {
        //å¦‚æœæœ‰å¾ªç¯èŠ‚,2Så¿…æœ‰Så­ä¸²æ•°é‡å¤§äº2,æ¯”å¦‚s = "aabaab"
        //2s = "aabaabaabaabaab"
        //ä»ä¸‹æ ‡1å¼€å§‹æ‰¾ï¼Œå¿…ä¸å¯èƒ½åœ¨size()æ‰¾åˆ°s(2sä¸­ç¬¬äºŒä¸ªsçš„èµ·ç‚¹).
        return (s + s).find(s, 1) != s.size();
    }
};

int main(int argc, char **argv)
{
    string s = "abcabcabcabc";
    Solution *so = new Solution();
    bool ret = so->repeatedSubstringPattern(s);
    cout << ret <<"\n";
    return 0;
}
```

![459é‡å¤å¾ªç¯å­ä¸²ç»„æˆå­—ç¬¦ä¸²](./assets/459é‡å¤å¾ªç¯å­ä¸²ç»„æˆå­—ç¬¦ä¸².jpg)

------

##### æ–¹æ³•2

- å¦‚æœä¸€ä¸ªå­—ç¬¦ä¸²sæ˜¯ç”±é‡å¤å­ä¸²ç»„æˆï¼Œé‚£ä¹ˆ æœ€é•¿ç›¸ç­‰å‰åç¼€ä¸åŒ…å«çš„å­ä¸²ä¸€å®šæ˜¯å­—ç¬¦ä¸²sçš„æœ€å°é‡å¤å­ä¸²ã€‚
- åœ¨nextè¡¨ä¸­ï¼šå¦‚æœ`len % (len - (next[len - 1] + 1)) == 0` ï¼Œåˆ™è¯´æ˜æ•°ç»„çš„é•¿åº¦æ­£å¥½å¯ä»¥è¢« æœ€é•¿ç›¸ç­‰å‰åç¼€ä¸åŒ…å«çš„å­ä¸²çš„é•¿åº¦ æ•´é™¤ ï¼Œè¯´æ˜è¯¥å­—ç¬¦ä¸²æœ‰é‡å¤çš„å­å­—ç¬¦ä¸²ã€‚

```c++
#include <iostream>
#include <vector>
#include <algorithm>    //resever
#include <string>

using namespace std;

class Solution {
public:
    void getNext(int *next, const string& s)
    {
        //1.åˆå§‹åŒ–
        int j = -1;     //jæŒ‡å‘å‰ç¼€æœ«å°¾ä½ç½®ï¼ŒiæŒ‡å‘åç¼€æœ«å°¾ä½ç½®ã€‚
        next[0] = j;    //å‰ç¼€è¡¨ç»Ÿä¸€å‡ä¸€çš„è®°å½•æ–¹æ³•

        
        for(int i = 1; i < s.size(); i++)
        {   
            //2.å¤„ç†å‰åç¼€ä¸åŒçš„å‰å†µ
            while(j >= 0 && s[i] != s[j + 1])
                j = next[j];    //å‘å‰å›é€€

            //3.å¤„ç†å‰åç¼€ç›¸åŒçš„æƒ…å†µ
            if(s[i] == s[j + 1])
            {
                j++;
            }
            next[i] = j;
        }
    }

    bool repeatedSubstringPattern(string s) {
        
        if(s.size() == 0) return false;

        int next[s.size()];
        getNext(next, s);
        int len = s.size();
        if(next[len - 1] != -1 && len % (len - next[len - 1] -1) == 0)
        {
            return true;
        }

        return false;
    }
};

int main(int argc, char **argv)
{
    string s = "abcabcabcabc";
    vector<int> next(s.size());
    Solution *so = new Solution();
    bool ret = so->repeatedSubstringPattern(s);
    cout << ret << "\n";

    return 0;
}
```

#### æ€»ç»“

å­—ç¬¦ä¸²ç±»ç±»å‹çš„é¢˜ç›®ï¼Œå¾€å¾€æƒ³æ³•æ¯”è¾ƒç®€å•ï¼Œä½†æ˜¯å®ç°èµ·æ¥å¹¶ä¸å®¹æ˜“ï¼Œå¤æ‚çš„å­—ç¬¦ä¸²é¢˜ç›®éå¸¸è€ƒéªŒå¯¹ä»£ç çš„æŒæ§èƒ½åŠ›ã€‚

åŒæŒ‡é’ˆæ³•æ˜¯å­—ç¬¦ä¸²å¤„ç†çš„å¸¸å®¢ã€‚

KMPç®—æ³•æ˜¯å­—ç¬¦ä¸²æŸ¥æ‰¾æœ€é‡è¦çš„ç®—æ³•ï¼Œä½†å½»åº•ç†è§£KMPå¹¶ä¸å®¹æ˜“ï¼Œæˆ‘ä»¬å·²ç»å†™äº†äº”ç¯‡KMPçš„æ–‡ç« ï¼Œä¸æ–­æ€»ç»“å’Œå®Œå–„ï¼Œæœ€ç»ˆæ‰æŠŠKMPè®²æ¸…æ¥šã€‚

ğŸ“ï¼š2024-10-15-23:33å®Œæˆå­—ç¬¦ä¸²ç›¸å…³ç®—æ³•

